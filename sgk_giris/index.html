<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SGK Ä°ÅŸe GiriÅŸ Dashboard</title>
  <link rel="stylesheet" href="./src/style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://code.jscharting.com/latest/jscharting.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="container">
      <div class="topbar-row">
        <h1>SGK Ä°ÅŸe GiriÅŸ Dashboard</h1>
        <a class="btn ai-btn" href="/ai">ðŸ¤– AI YorumlayÄ±cÄ±</a>
      </div>
      <div class="sub">
        <span id="dataInfo">Veri: -</span>
        <span class="dot">â€¢</span>
        <span id="lastUpdated">GÃ¼ncelleme: -</span>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Filters -->
    <section class="card filters">
      <div class="filters-row">
        <div class="f">
          <label>Tarih Filtresi</label>
          <input id="fDateRange" placeholder="Tarih aralÄ±ÄŸÄ± seÃ§in..." readonly />
        </div>
        <div class="f">
          <label>Ä°ÅŸyeri</label>
          <select id="fIsyeri"></select>
        </div>
        <div class="f">
          <label>Departman</label>
          <select id="fDepartman"></select>
        </div>
        <div class="f">
          <label>Status</label>
          <select id="fStatus">
            <option value="">Hepsi</option>
            <option value="COMPLETED">COMPLETED</option>
            <option value="ERROR">ERROR</option>
          </select>
        </div>
        <div class="f">
          <label>Arama</label>
          <input id="fSearch" placeholder="ad, soyad, unvan, pozisyon, meslek_kodu..." />
        </div>
      </div>

      <div class="filters-actions">
        <button class="btn" id="btnReset">SÄ±fÄ±rla</button>
        <button class="btn primary" id="btnExportCsv">CSV DÄ±ÅŸa Aktar</button>
      </div>
    </section>

    <!-- KPI Cards -->
    <section class="grid kpi">
      <div class="card">
        <div class="label">Toplam KayÄ±t</div>
        <div class="value" id="kpiTotal">-</div>
      </div>
      <div class="card">
        <div class="label">BaÅŸarÄ±lÄ± Ä°ÅŸe GiriÅŸ SayÄ±sÄ±</div>
        <div class="value" id="kpiCompleted">-</div>
      </div>
      <div class="card">
        <div class="label">HatalÄ± Ä°ÅŸe GiriÅŸ</div>
        <div class="value" id="kpiError">-</div>
      </div>
      <div class="card">
        <div class="label">BaÅŸarÄ± OranÄ±</div>
        <div class="value" id="kpiSuccessRate">-</div>
      </div>
      <div class="card">
        <div class="label">Toplam SÃ¼re</div>
        <div class="value" id="kpiTotalTime">-</div>
        <div class="hint" id="kpiTotalSecHint"></div>
      </div>
      <div class="card">
        <div class="label">Avg Ä°ÅŸlem SÃ¼resi (sn)</div>
        <div class="value" id="kpiAvgDuration">-</div>
      </div>
      <div class="card">
        <div class="label">Toplam BaÅŸarÄ±sÄ±z SÃ¼resi</div>
        <div class="value" id="kpiErrorTime">-</div>
      </div>
      <div class="card">
        <div class="label">Toplam BaÅŸarÄ±lÄ± SÃ¼resi</div>
        <div class="value" id="kpiSuccessTime">-</div>
      </div>
      <div class="card">
        <div class="label">GÃ¼nlÃ¼k Ort. Ä°ÅŸe GiriÅŸ</div>
        <div class="value" id="kpiDailyAvg">-</div>
        <div class="hint">Tarih filtresine gÃ¶re</div>
      </div>
      <div class="card">
        <div class="label">FTE Tasarrufu</div>
        <div class="value" id="kpiFTE">-</div>
        <div class="hint" id="kpiFTEHint"></div>
      </div>
      <div class="card">
        <div class="label">Manuel KazanÄ±lan Zaman</div>
        <div class="value" id="kpiSavedTime">-</div>
        <div class="hint" id="kpiSavedTimeHint"></div>
      </div>
    </section>

    <!-- Widgets -->
    <section class="widgets-grid">
      <!-- Row 1: GÃ¼nlÃ¼k Trend -->
      <div class="card w-trend">
        <div class="card-title-row">
          <span class="card-title">GÃ¼nlÃ¼k Trend</span>
          <div class="pill-group" id="trendRangeGroup">
            <button class="pill" data-range="7">Son 7</button>
            <button class="pill active" data-range="15">Son 15</button>
            <button class="pill" data-range="30">Son 30</button>
            <button class="pill" data-range="0">TÃ¼mÃ¼</button>
          </div>
        </div>
        <div class="linechart-wrap" id="wDailyTrend">
          <svg class="linechart-svg" id="trendSvg"></svg>
          <div class="linechart-tooltip" id="trendTooltip"></div>
        </div>
      </div>

      <!-- Row 2: Ä°ÅŸlem YoÄŸunluÄŸu -->
      <div class="card w-hourly">
        <div class="card-title">Ä°ÅŸlem YoÄŸunluÄŸu (Saatlik)</div>
        <div class="chart-canvas-wrap">
          <canvas id="hourlyChart"></canvas>
        </div>
      </div>

      <!-- Row 3: Pozisyon DaÄŸÄ±lÄ±mÄ± - Treemap -->
      <div class="card w-personnel-bubble">
        <div class="card-title-row">
          <span class="card-title">Pozisyon DaÄŸÄ±lÄ±mÄ± (Top 30)</span>
          <span class="hint">KayÄ±t sayÄ±sÄ±na gÃ¶re</span>
        </div>

        <div class="personnel-top">
          <div class="mini-kpi">
            <div class="label">En YoÄŸun Pozisyon</div>
            <div class="value" id="kpiTopPos">-</div>
            <div class="hint" id="kpiTopPosHint"></div>
          </div>
        </div>

        <div id="bubbleGridChart" style="width: 100%; height: 450px;"></div>
      </div>

      <!-- Row 3.5: Departman DaÄŸÄ±lÄ±mÄ± - Treemap -->
      <div class="card w-department-treemap">
        <div class="card-title-row">
          <span class="card-title">Departman DaÄŸÄ±lÄ±mÄ± (Top 30)</span>
          <span class="hint">KayÄ±t sayÄ±sÄ±na gÃ¶re</span>
        </div>

        <div class="personnel-top">
          <div class="mini-kpi">
            <div class="label">En YoÄŸun Departman</div>
            <div class="value" id="kpiTopDept">-</div>
            <div class="hint" id="kpiTopDeptHint"></div>
          </div>
        </div>

        <div id="departmentTreemapChart" style="width: 100%; height: 450px;"></div>
      </div>

      <!-- Row 3.5: Tarihlere GÃ¶re Hastane GiriÅŸ DeÄŸiÅŸimi -->
      <div class="card w-hospital-time">
        <div id="hospitalTimeChart" style="width: 100%; height: 550px;"></div>
      </div>

      <!-- Row 4: 3-column grid for error analysis -->
      <div class="card w-error-row">
        <div class="error-analysis-grid">
          <!-- Column 1: YoÄŸun Hata Nedenleri (horizontal bars) -->
          <div class="error-col">
            <div class="card-title">YoÄŸun Hata Nedenleri</div>
            <div class="chart" id="wErrorTypes"></div>
          </div>

          <!-- Column 2: Top 10 HatalÄ± Ä°ÅŸyeri (pie chart) -->
          <div class="error-col">
            <div class="card-title">Top 10 HatalÄ± Ä°ÅŸyeri</div>
            <div class="chart-canvas-wrap chart-pie-wrap">
              <canvas id="errorIsyeriPie"></canvas>
            </div>
          </div>

          <!-- Column 3: Top 10 BaÅŸarÄ±lÄ± Ä°ÅŸyeri (pie chart) -->
          <div class="error-col">
            <div class="card-title">Top 10 BaÅŸarÄ±lÄ± Ä°ÅŸyeri</div>
            <div class="chart-canvas-wrap chart-pie-wrap">
              <canvas id="successIsyeriPie"></canvas>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script src="./src/app.js"></script>
</body>
</html>
